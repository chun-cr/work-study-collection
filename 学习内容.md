## 一、刷题遇到的小知识点

### 1.`this`指向问题

回调函数中使用普通函数（如`setTYimeout`、`setInterval`)是全局函数，其`this`指向`window`或`undefined`

~~~javascript
mounted(){
    setTimeout(function(){
        // 错误：this 指向 window，无法访问 this.count
        this.count++  //报错：Cannot read property 'count' of undefined
    },1000)
}
~~~

第三方库（如`axios`、`element UI`的回调）中的普通函数，`this`通常是`undefined`或自身库的上下文

~~~javascript
mounted(){
    document.getElementById("btn").addEventListener("click",function(){
        //this指向按钮dom元素
        this.count++ //报错
    })
    
    //axios回调
    axios.get("/api/data").then(function(res) {
        // 错误：this 指向 undefined（严格模式）
        this.msg = res.data  //报错
    })
    
}
~~~

修复以上问题，使用箭头函数，继承上一个作用域的`this`

`vue`会将`data`中的属性，`methods`中的方法，`computed`等，全部挂载到组件实例，组件内的生命周期钩子，`methods`等普通函数，会被`vue`自动绑定`this`为组件实例，而回调函数（如 `setTimeout`、`forEach` 的回调）是独立于组件实例的函数，其 `this` 由函数调用方式决定（全局调用则指向 `window`/`undefined`），因此需要手动绑定。

### 2.`map`

`map`支持任意类型作为键（包括对象、函数、基本类型等）

**基本用法**

~~~javascript
//初始化传入键值对
const map = Map([
    ['name','小春'],
    [123,'数字键'],
    [{id: 1}, '对象键']
])

//创建空map
const map = new Map()

//1.添加
map.set(2,5) //键2值5
map.set(2,4) //再次设置同一键，覆盖值，键2值4

//2.判断是否存在指定键
map.has(3)

//3.获取指定的键
map.get(2)  //如果键存在，就返回对应的值，不存在则返回undefined

//删除键
map.delete(2) //删除成功返回true，键不存在返回false

//清空所有键值对
map.clear()
map.size  //0 查询map里键值对的数量
~~~

**遍历`map`**

~~~javascript
const map = new Map([[2,0], [7,1],[5,6]])

for (const [value,key] of map){
    console.log(`键:${key},值:${value}`)
}

for (const key of map.keys()){
    console.log(`键：${key}`)
}
for (const value of map.values()){
    console.log(`值：${value}`)
}
//forEach遍历
map.forEach((value,key)=>{
    console.log(`键:${key},值:${value}`)
})
~~~

**注意事项：**`map`对象获取键、值迭代器的方式是`.keys()`和`.value()`；`forEach`回调第一个参数是值，第二个参数是键，所以是`map.foreach((value,key) => xxx)`

### 3.`sort()`

`sort`无参数时按字符串的Unicode编码排序，因此：

- 标点/空格 < 数字 < 大写字母 < 小写字母
- 空字符串/特殊字符：空字符串`' '.split('')`会得到空数组，最终结果任为空；包含emoji/多字节字符时，`split('')`可能会拆分错误（需要用`[...str]`代替）

**比较函数**`(a, b) => a - b`

| 比较结果 (`a - b`) | `sort()` 行为       | 最终排序效果 |
| ------------------ | ------------------- | ------------ |
| < 0（负数）        | `a` 排在 `b` 前面   | 升序         |
| = 0                | `a` 和 `b` 位置不变 | 无影响       |
| > 0（正数）        | `b` 排在 `a` 前面   | 升序         |

### 4.`set`（集合）

`set`是无序（没有索引，无法通过下标访问）、不重复、可迭代（如for循环）的数据结构

**常用操作**

~~~javascript
const set = new Set([1,2,2,3])

console.log(set) //Set(3) {1, 2, 3} —— 重复的 2 被自动去除

//添加元素
set.add(4)  ->Set {1,2,3,4}
//删除
set.delete(2)  ->Set {1,3,4}
//判断
set.has(3)  ->true
//获取数量
set.size  ->3
set.clear  ->Set {}

//遍历
const numSet = new Set([10,20,30])
for(let num of numSet){
    console.log(num) // 输出 10、20、30（顺序和插入一致，但无索引）
}
~~~

### 5.`continue`

`continue` 是 JavaScript 中的流程控制语句，用于**跳过当前循环迭代的剩余代码**，直接进入下一次循环迭代。

## 二、大知识点梳理

### 1.虚拟滚动（附链接）[新手也能看懂的虚拟滚动实现方法本篇文章致力于小白也能懂的虚拟滚动实现原理，一步一步深入比较以及优化实现方案，内容浅显易懂 - 掘金](https://juejin.cn/post/6844904183582162957#heading-3)
